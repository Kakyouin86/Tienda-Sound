<!DOCTYPE html>
<html lang="en">
<%- include('./../partials/head.ejs', { style: 'login.css', title: 'Register' }) %>

  <body>
    <%- include('./../partials/header') %>
      <main class="main-login">
        <a href="/">
          <div class="flecha-volver">
            <img src="/img/flecha.svg" alt="">
            <p>Volver</p>
          </div>
        </a>
        <section class="form-register form-container container col-lg-5 col-md-8 col-sm-12 mx-auto">

          <h1><span class="texto-resaltado">Editá</span> tu información!</h1>     
          <form action="/users/editarUser/<%= user.id %>?_method=PATCH" class="base-form profile-form" method="POST" enctype="multipart/form-data">
            <div class="imputs">
            <input type="text" placeholder="Nombre Completo" name="nombreCompleto" id="nombreCompleto" value="<%= user.nombreCompleto %>">
            <div class="text-danger nombreCompleto"></div>

            <% if (locals.errors && errors.nombreCompleto) { %>
            <div class="text-danger">
              <i class="fa-solid fa-triangle-exclamation"></i> <%= errors.nombreCompleto.msg %>
            </div>
            <% } %>

            <input type="text" placeholder="Correo electrónico" name="email" id="email" value="<%= user.email %>">
            <div class="text-danger email"></div>

            <% if (locals.errors && errors.email) { %>
              <div class="text-danger">
              <i class="fa-solid fa-triangle-exclamation"></i> <%= errors.email.msg %>
              </div>
             <% } %>
            <input type="password" placeholder="Contraseña" name="password" id="password" value="<%= locals.oldData ? oldData.password : null  %>">
            <i class="bi bi-eye-slash ojito" id="togglePassword"></i>
            <% if (locals.errors && errors.password) { %>
              <div class="text-danger">
              <i class="fa-solid fa-triangle-exclamation"></i> <%= errors.password.msg %>
              </div>
             <% } %>
             <div class="text-danger password"></div>
            
            <label for="avatar" style="padding-bottom: 5px;"><i class="fa-regular fa-id-card"></i>  Imagen de tu Perfil</label>
            <input type="file" name="avatar" style="padding-top: 17px;"  value="" id="imgAvatar">
            <div class="img-cont">
              <img src="http://res.cloudinary.com/dlf8flk1o/image/upload/v1692991185/avatars/<%=user.imagen%>" alt="foto">
            </div>
            <div class="text-danger imgAvatar"></div>
           <% if (locals.errors && errors.avatar) { %>
             <div class="text-danger">
              <i class="fa-solid fa-triangle-exclamation"></i> <%= errors.avatar.msg %>
             </div>
           <% } %>
          </div>

           <div class="profile-detail-btn">
            <button type="submit" class="form-btn inicio-btn">Editar información</button>
          </div>

          </form>

        </section>
      </main>
      <%- include('./../partials/footer') %>
        <script src="https://kit.fontawesome.com/2396c6fc63.js" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
          crossorigin="anonymous"></script>
          <script src="/js/ValFrontEditUser.js"></script>
  </body>

</html>